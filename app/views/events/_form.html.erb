<%= form_for(@event) do |f| %>
  <% if @event.errors.any? %>
    <div id="error_explanation">
      <h2>Veranstaltung konnte nicht gespeichert werden:</h2>

      <ul>
      <% @event.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <legend class="section-title">Infos für die Beantragung beim Verband (Pflichtfelder)</legend>

  <div class="form-section">
    
    <div class="form-group">
      <%= f.label :title %>
      <%= f.text_field :title, :class => "form-controls" %>
    </div>
      
    <div class="form-group">
      
      <label class="subtitle">Adresse</label>
      
      <%= f.fields_for :location do |l| %>
      
        <div class="form-group">
          <label><%= l.label :street %></label>
          <%= l.text_field :street, :class => "form-controls" %>
        </div>
        
        <div class="form-group">
          <label><%= l.label :number %></label>
          <%= l.text_field :number, :class => "form-controls" %>
        </div>
        
        <div class="form-group">
          <label><%= l.label :zip %></label>
          <%= l.text_field :zip, :class => "form-controls" %>
        </div>
        
        <div class="form-group">
          <label><%= l.label :city %></label>
          <%= l.text_field :city, :class => "form-controls", :value => "Berlin" %>
        </div>
      
        <%= l.hidden_field :country, :value => "DE" %>
        <%= l.hidden_field :event_id, :value => @event.id %>
        <%= f.hidden_field :latitude, :id => 'gmaps-output-latitude' %>
        <%= f.hidden_field :longitude, :id => 'gmaps-output-longitude' %>
        
      <% end %>
    </div>

    <div class="form-group">
      <%= f.label :date %>
      <%= f.date_field :date, "value" => @event.date || Time.now.to_date.to_s, :class => "form-controls"  %>
    </div>
  
    <div class="form-group">
      <%= f.label :schedule, :class => "subtitle" %>
      <%= link_to_add_fields("#{t(:item)} hinzufügen", f, :schedule_items) %>
      <%= f.fields_for :schedule_items do |builder| %>
        <%= render "schedule_item_fields", :f => builder %>
      <% end %>
    </div>
  
    <div>
      
      <label class="subtitle"><%= t(:contact) %></label>
    
      <div class="inline-fields">
        <div class="form-group">
          <%= f.label :contact_name %>
          <%= f.text_field :contact_name, :class => "form-controls" %>
        </div>
      
        <div class="form-group check">
          <%= f.check_box :contact_name_public, :class => "form-controls" %>
          <%= f.label t(:public) %>?
        </div>
      </div>
    
      <div class="inline-fields">
        <div class="form-group">
          <%= f.label :contact_phone %>
          <%= f.text_field :contact_phone, :class => "form-controls" %>
        </div>
        
        <div class="form-group check">
          <%= f.check_box :contact_phone_public, :class => "form-controls" %>
          <%= f.label t(:public) %>?
        </div>
      </div>
      
      <div class="inline-fields">
        <div class="form-group">
          <%= f.label :contact_mail %>
          <%= f.text_field :contact_mail, :value => @event.contact_mail || current_user.contact_mail, :class => "form-controls" %>
        </div>
        
        <div class="form-group check">
          <%= f.check_box :contact_mail_public, :class => "form-controls" %>
          <%= f.label t(:public) %>?
        </div>
      </div>
    
    </div>
  
    <div class="form-group">
      Todo: Landesverband, Kampfgericht
    </div>
    
  </div>
  
  <legend class="section-title">Infos für Teilnehmer</legend>
  
  <div class="form-section">
    
    <div class="form-group">
      <%= f.label :additional_info %>
      <%= f.text_area :additional_info, :rows => "5", :class => "form-controls" %>
    </div>
  
    <div class="form-group">
      <%= f.label :fee %>
      <%= f.text_field :fee, :class => "form-controls" %>
    </div>
    
    <div class="form-group check">
      <%= f.label t(:performance_class, count: 2) %><br>
      <%= f.collection_check_boxes :performance_class_ids, PerformanceClass.all, :id, :title, :class => "form-controls"  %>
    </div>
  
    <div class="form-group">
      <label class="subtitle"><%= t(:available) %></label>
      
      <%= f.label :gloves_available %>?
      <%= f.check_box :gloves_available, :class => "form-controls" %>

      <%= f.label :catering_available %>?
      <%= f.check_box :catering_available, :class => "form-controls" %>
    </div>
  
    <div class="form-group">
      <%= f.label :admission, :class => "subtitle" %>
      
      <%= f.label t(:default) %>
      <%= f.text_field :admission, :class => "form-controls" %>
      
      <%= f.label t(:discounted) %>
      <%= f.text_field :admission_discounted, :class => "form-controls" %>
    </div>
  
    <div class="form-group">
      <%= f.hidden_field :club_id, :value => @event.club_id || current_user.id %>
    </div>
    
  </div>
  
  <div class="actions form-actions">
    <%= f.submit t(:request), :class => "btn" %>
    <%= link_to t(:cancel), my_events_path, :class => "btn delete" %>
  </div>
<% end %>
